{% extends "base.html" %}
{% block body_class %}main-layout inner_posituong{% endblock %}
{% load static %}
{% block title %}Sign in{% endblock title %}
{% block content %}
      <!--  contact -->
      <div class="contact">
         <div class="container">
            <div class="row">
               <div class="col-md-12">
                  <div class="titlepage">
                     <h2>Sign in</h2>
                  </div>
               </div>
            </div>
            <div class="row">
               <div class="col-md-10 offset-md-1">
                  <form id="request" class="main_form" method="post" action="{% url "accounts:user_login_api" %}">
                     {% csrf_token %}
                     <div class="row">
                        <div class="col-md-12">
                           <input class="contactus" placeholder="Email" type="email" name="email" required> 
                        </div>
                        <div class="col-md-12">
                           <input class="contactus" placeholder="Password" type="Password" name="password" required>                          
                        </div>
                        <div class="col-md-12">
                           <button class="send_btn">Sign in</button>
                        </div>
                        <div class="col-md-12 text-center mt-3"> <!-- Centered text under the button with margin top -->
                           <p style="color: white;">Don't have an account? <a href="{% url "accounts:user_register" %}" style="color: #48ca95;">Sign up</a></p> 
                     </div>
                  </form>
               </div>
            </div>
         </div>
      </div>
      <!-- end contact -->
       <!-- Javascript files-->
  <script src="{% static 'js/jquery.min.js' %}"></script>
  <script src="{% static 'js/popper.min.js' %}"></script>
  <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'js/jquery-3.0.0.min.js' %}"></script>
  <!-- sidebar -->
  <script src="{% static 'js/jquery.mCustomScrollbar.concat.min.js' %}"></script>
  <script src="{% static 'js/custom.js' %}"></script>
  <script>
   const login = document.getElementById("login1")
login.addEventListener("click",function(event) {
event.preventDefault();
getToken();
})
function getToken(){
const username = document.getElementById("username1").value;
const password = document.getElementById("password1").value;
console.log(username)
fetch("/api/token/",{method:'POST',headers:{
"Content-Type":"application/json",
},
body: JSON.stringify({
phone_number:username,
password:password,
}),})
.then((response) => response.json())
.then((data) => {
console.log(data);
localStorage.setItem("refresh_token",data.refresh);
localStorage.setItem("access_token",data.access);
});}
  </script>
   {% endblock content %} 